<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DailyCheck-ins App</title>
 <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>DailyCheck-ins</h1>

  <label>Select User: </label>
  <select id="user-select">
    <option value="Arnab">Arnab (Editable)</option>
    <option value="Rajdeep">Rajdeep (View Only)</option>
    <option value="Shubham">Shubham (View Only)</option>
  </select>

  <div id="todo-section">
    <h2>To-Do List for <span id="user-name">Arnab</span></h2>
    <input type="text" id="task-input" placeholder="New task">
    <button id="add-btn">Add</button>
    <ul id="todo-list"></ul>
  </div>

 <script>
  const fixedTasks = {
      Shubham: [
        { text: "DSA Question", done: false },
        { text: "Academics [1 hour]", done: false },
        { text: "Gym", done: false },
        { text: "Development/Projects", done: false }
      ],
      Rajdeep: [
        { text: "Running/Basketball", done: false },
        { text: "Code", done: false },
        { text: "Academics [1 hour]/3 ALA Q", done: false }
      ],
      Arnab: [
        { text: "Gym", done: false },
        { text: "Academics [2 hours]", done: false },
        { text: "Leetcode 2 Q", done: false }
      ]
    };

    const userSelect = document.getElementById('user-select');
    const userNameSpan = document.getElementById('user-name');
    const taskInput = document.getElementById('task-input');
    const addBtn = document.getElementById('add-btn');
    const todoList = document.getElementById('todo-list');

    const todayKey = `daily-checkins-${new Date().toISOString().slice(0, 10)}`;
    let currentUser = 'Arnab';

    let allTasks = JSON.parse(localStorage.getItem(todayKey)) || { ...structuredClone(fixedTasks) };

    function renderList() {
      userNameSpan.textContent = currentUser;
      todoList.innerHTML = '';
      const todos = allTasks[currentUser] || [];

      todos.forEach((task, index) => {
        const li = document.createElement('li');
        li.className = currentUser !== 'Arnab' ? 'readonly' : '';
        li.innerHTML = `
          <span style="text-decoration: ${task.done ? 'line-through' : 'none'}">${task.text}</span>
          ${currentUser === 'Arnab' ? `
            <button onclick="toggleDone(${index})">✅</button>
            <button onclick="deleteTask(${index})">🗑️</button>` : ''}
        `;
        todoList.appendChild(li);
      });

      const editable = currentUser === 'Arnab';
      taskInput.disabled = !editable;
      addBtn.disabled = !editable;
    }

    function saveTasks() {
      localStorage.setItem(todayKey, JSON.stringify(allTasks));
    }

    function addTask() {
      const text = taskInput.value.trim();
      if (text !== '') {
        allTasks.Arnab.push({ text, done: false });
        taskInput.value = '';
        saveTasks();
        renderList();
      }
    }

    function toggleDone(index) {
      allTasks.Arnab[index].done = !allTasks.Arnab[index].done;
      saveTasks();
      renderList();
    }

    function deleteTask(index) {
      allTasks.Arnab.splice(index, 1);
      saveTasks();
      renderList();
    }

    userSelect.addEventListener('change', () => {
      currentUser = userSelect.value;
      renderList();
    });

    addBtn.addEventListener('click', addTask);

    renderList();
 </script>

</body>
</html>
